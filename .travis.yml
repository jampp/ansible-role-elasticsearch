---
language: python
python:   "2.7"

before_install:
  - sudo apt-get update -qq

install:
  - pip install ansible==1.9.4
  - sudo apt-get remove -y --purge elasticsearch

script:
  # Test functionality with default values 1.x
  - ansible-playbook tests/test_defaults.yml -i localhost, --syntax-check 
  - ansible-playbook tests/test_defaults.yml -i localhost, --connection=local --sudo -e "es_version=1.7.4"

  # Test plugins for 1.x
  - ansible-playbook tests/test_plugins.yml -i localhost, --syntax-check 
  - ansible-playbook tests/test_plugins.yml -i localhost, --connection=local --sudo -e "es_version=1.7.4"

  # Test functionality with default values 2.x
  - sudo apt-get remove -y --purge elasticsearch
  - ansible-playbook tests/test_defaults.yml -i localhost, --syntax-check 
  - ansible-playbook tests/test_defaults.yml -i localhost, --connection=local --sudo

  # Test plugins for 2.x
  - ansible-playbook tests/test_plugins.yml -i localhost, --syntax-check 
  - ansible-playbook tests/test_plugins.yml -i localhost, --connection=local --sudo


# vi:ts=2:sw=2:et:ft=yaml
